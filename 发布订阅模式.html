<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <button>点击执行</button>
</body>
<!-- <script>
    // 手写发布订阅模式 EventEmitter
    class EventEmitter {
        constructor() {
            this.events = {};
        }
        // 实现订阅
        on(type, callBack) {
            if (!this.events) this.events = Object.create(null);

            if (!this.events[type]) {
                this.events[type] = [callBack];
            } else {
                this.events[type].push(callBack);
            }
        }
        // 删除订阅
        off(type, callBack) {
            if (!this.events[type]) return;
            this.events[type] = this.events[type].filter(item => {
                return item !== callBack;
            });
        }
        // 只执行一次订阅事件
        once(type, callBack) {
            function fn() {
                callBack();
                this.off(type, fn);
            }
            this.on(type, fn);
        }
        // 触发事件
        emit(type, ...rest) {
            this.events[type] && this.events[type].forEach(fn => fn.apply(this, rest));
        }
    }

    const btn = document.querySelector('button');
    btn.onclick = () => {
        event.emit("click", '啊？');
    }

    // 使用如下
    const event = new EventEmitter();
    console.log(event);

    const handle = (...rest) => {
        console.log(rest);
    };

    // event.on("click", handle);
    // setInterval(() => {
    //     event.emit("click", 1, 2, 3, 4);
    // }, 1000);

    // event.off("click", handle);
    event.on("click", handle);


    // event.emit("click", 1, 2);

    // event.once("dbClick", () => {
    //     console.log(123456);
    // });
    // event.emit("dbClick");
    // event.emit("dbClick");

</script> -->

<!-- <script>
    class MyEvent {
        constructor() {
            this.evet = {}
        }

        $on(cbName, cb) {
            if (!(cbName && cb)) return console.log('请传入事件名和，事件函数');
            this.evet[cbName] = cb;
        }

        $emit(cbName, ...arr) {
            Object.keys(this.evet).forEach(v => {
                if (v === cbName) {
                    this.evet[v](...arr)
                }
            })
        }
    }



    function handle(...arr) {
        console.log(arr);
    }

    const myEvent = new MyEvent();

    myEvent.$on('hahah', handle)

    document.querySelector('button').addEventListener('click', () => {
        myEvent.$emit('hahah', '我触发你了')
    })
</script> -->

</html>